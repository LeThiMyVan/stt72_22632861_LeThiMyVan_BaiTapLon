<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - LIFE</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link href="../css/style.css" rel="stylesheet">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <h2><a href="../html/homepage.html">LIFE</a></h2>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="gioiThieuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Giới thiệu
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="gioiThieuDropdown">
                                <li><a class="dropdown-item" href="../html/about.html">Về chúng tôi</a></li>
                                <li><a class="dropdown-item" href="../html/tamnhin.html">Tầm nhìn</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="../html/product.html" id="sanPhamDropdown" role="button" aria-expanded="false">
                                Sản phẩm
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="sanPhamDropdown">
                                <li><a class="dropdown-item" href="../html/tainghe.html">Tai nghe</a></li>
                                <li><a class="dropdown-item" href="../html/capsac.html">Cáp sạc</a></li>
                                <li><a class="dropdown-item" href="../html/sacduphong.html">Pin sạc dự phòng</a></li>
                                <li><a class="dropdown-item" href="../html/oplung.html">Ốp lưng</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="chinhSachDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Chính sách
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="chinhSachDropdown">
                                <li><a class="dropdown-item" href="../html/chinhsachbaohanh.html">Chính sách bảo hành</a></li>
                                <li><a class="dropdown-item" href="../html/chinhsachdoitra.html">Chính sách đổi trả</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="blogDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Blog
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="blogDropdown">
                                <li><a class="dropdown-item" href="../html/dandaucn.html">Dẫn đầu công nghệ</a></li>
                                <li><a class="dropdown-item" href="../html/chuongtrinhkm.html">Chương trình khuyến mãi</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../html/sitemap.html">
                                SiteMap
                            </a>
                        </li>
                    </ul>
                    <div class="auth-links">
                        <a class="nav-link" href="../html/dangnhap.html">Đăng nhập</a>
                        <a class="nav-link" href="../html/dangki.html">Đăng ký</a>
                    </div>
                    <div id="userInfo" style="display: none;"></div>
                    <ul class="navbar-nav ms-2">
                        <li class="nav-item">
                            <a class="nav-link" href="../html/shopping cart.html" id="cartButton" style="display: flex;">
                                <img src="../img/giohang.jpg" alt="Icon Giỏ Hàng" style="width: 38px; height: 38px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; background-size: cover; background-position: center; ">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="container my-5">
        <h1 class="mb-4">Giỏ hàng của bạn</h1>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" id="selectAll" class="form-check-input">
                            <label for="selectAll" class="form-check-label">Chọn tất cả</label>
                        </th>
                        <th>Sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Tổng</th>
                        <th>Xóa</th>
                    </tr>
                </thead>
                <tbody id="cartItems">
                    <!-- Các mục giỏ hàng sẽ được thêm vào đây bằng JavaScript -->
                </tbody>
            </table>
        </div>
        <div class="d-flex justify-content-between align-items-center mt-4">
            <h4>Tổng cộng: <span id="totalPrice">0 đ</span></h4>
            <button id="checkoutButton" class="btn btn-primary">Thanh toán</button>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 footer-section">
                    <h1>LIFE</h1>
                </div>

                <div class="col-lg-3 col-md-6 footer-section">
                    <h5>SẢN PHẨM</h5> <br> <br>
                    <ul>
                        <li><a href="../html/tainghe.html">Tai nghe</a></li>
                        <li><a href="../html/capsac.html">Cáp sạc</a></li>
                        <li><a href="../html/sacduphong.html">Pin sạc dự phòng</a></li>
                        <li><a href="../html/oplung.html">Ốp lưng</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 footer-section">
                    <h5>VỀ CÔNG TY</h5> <br> <br>
                    <ul>
                        <li><a href="../html/about.html">Về chúng tôi</a></li>
                        <li><a href="../html/dandaucn.html">Dẫn đầu công nghệ</a></li>
                        <li><a href="../html/chinhsachdoitra.html">Chính sách đổi trả</a></li>
                        <li><a href="../html/chuongtrinhkm.html">Chương trình khuyến mãi</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 footer-section">
                    <h5>ĐĂNG KÝ NHẬN TIN</h5>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control newsletter-input" placeholder="Email của bạn">
                        <button class="btn newsletter-btn" type="button" style="width: 60px; height: 37px;" style="background-color: #ff6b35;">
                            <i class="fas fa-paper-plane">Gửi</i>
                        </button>
                    </div>
                    <div class="social-icons">
                        <a href="#" style="background-image: url(../img/fb.jpg)"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" style="background-image: url('../img/ins.jpg');"><i class="fab fa-instagram"></i></a>
                        <a href="#" style="background-image: url('../img/yt.jpg');"><i class="fab fa-youtube"></i></a>
                        <a href="#" style="background-image: url('../img/tt.jpg');"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/shopping cart.js"></script>

    <script>
        function getCurrentUser() {
            const userDataString = localStorage.getItem('currentUser');
            if (userDataString) {
                try {
                    return JSON.parse(userDataString);
                } catch (e) {
                    return null;
                }
            }
            return null;
        }

        let currentUser = getCurrentUser();

        function updateUserInterface() {
            const authLinks = document.querySelector('.auth-links');
            const userInfo = document.getElementById('userInfo');

            if (currentUser) {
                authLinks.style.display = 'none';
                userInfo.style.display = 'flex';
                userInfo.style.alignItems = 'center';
                userInfo.innerHTML = `
                    <div class="user-container" style="display: flex; align-items: center; gap: 10px;">
                        <img src="../img/anhdaidien.jpg" alt="Ảnh đại diện" style="width: 38px; height: 38px; border-radius: 50%; object-fit: cover;">
                        <span style="color: #333; font-weight: 500;">${currentUser.name || currentUser.email}</span>
                        <button class="btn btn-outline-danger btn-sm" id="logoutButton">Đăng xuất</button>
                    </div>
                `;
                document.getElementById('logoutButton').addEventListener('click', logout);
            } else {
                authLinks.style.display = 'flex';
                userInfo.style.display = 'none';
            }
        }

        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('cartItems');

            currentUser = null;

            updateUserInterface();

            window.location.href = 'homepage.html';
        }

        updateUserInterface();

        window.addEventListener('storage', function(e) {
            if (e.key === 'currentUser') {
                currentUser = getCurrentUser();
                updateUserInterface();
            }
        });
    </script>
</body>

</html>